<!DOCTYPE html>
<html>
    <head>
        <title>CTP : Edge Service Gateway Comparison for CT - Applications</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">CTP</a></span>
                            </li>
                                                    <li>
                                <span><a href="Connected-Technology-Platform---HOME_106337033.html">Connected Technology Platform - HOME</a></span>
                            </li>
                                                    <li>
                                <span><a href="Knowledge-Base_106337044.html">Knowledge Base</a></span>
                            </li>
                                                    <li>
                                <span><a href="Product-Management_106337058.html">Product Management</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            CTP : Edge Service Gateway Comparison for CT - Applications
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Lakshminarayanan Mukundagiri (TMNA)</span>, last modified on May 02, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="EdgeServiceGatewayComparisonforCT-Applications-Introduction">Introduction</h1><p>One of the Team Connective Technology's Application Architects main goal is to support fellow Application Teams effort in creating Java, Spring Microservices based applications. While the Team Connected Technology will offer support for many categories this paper will focus on choosing the best Edge Server (API Gateway) and a  Service Registry/Load Balancer pair that offers the best solution for the following categories for now and the future as well: </p><ul><li>Secure</li><li>Service Discovery</li><li>Service Abstraction</li><li>Elastic Load Balancing (Failfast/Failsafe/HealFast)</li><li>API Pre/Post Filtering</li></ul><p>We talk about the Edge Server/Service Registry pair together because they do  not work in Isolation. They work in tandem. </p><h2 id="EdgeServiceGatewayComparisonforCT-Applications-EdgeServer/LoadBalancerToolsCompared">Edge Server/Load Balancer Tools Compared</h2><p>There are many options out there in the Technology world, but we are limiting our tools to the following two pairs:</p><ul><li>Amazon API Gateway/Amazon ALB</li><li>Spring/Netflx Zuul/Eureka</li></ul><p>Here is a quick summary of the comparison between AWS ALB and Zuul(with Eureka):</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/> <col/> <col/> <col/> </colgroup><tbody><tr><td class="confluenceTd"><strong> Feature</strong></td><td class="confluenceTd"><strong>AWS API Gateway + ALB</strong></td><td class="confluenceTd"><strong>Zuul + Eureka</strong></td><td class="confluenceTd"><strong> More Details</strong></td></tr><tr><td class="confluenceTd">Dynamic Routing</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Supported</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Monitoring</td><td class="confluenceTd"><p>Supported</p><p>with API Gateway and CloudWatch logs</p></td><td class="confluenceTd">Supported</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Resiliency</td><td class="confluenceTd">Multi AZ(Default)<br/>Multi Region can be achieved with Route 53 and multiple ALBs</td><td class="confluenceTd"><p>Multi Region can be done</p><p>with little bit customization</p></td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Security</td><td class="confluenceTd">AWS Lambda on API Gateway</td><td class="confluenceTd">Supported, customization needed.</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Scalability</td><td class="confluenceTd">AWS Managed</td><td class="confluenceTd">Customer Managed</td><td class="confluenceTd">This is an important aspect to consider</td></tr><tr><td class="confluenceTd">API Metrics</td><td class="confluenceTd">API Gateway<br/> CloudWatch</td><td class="confluenceTd">Supported and Customization needed</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">HA</td><td class="confluenceTd"> Yes</td><td class="confluenceTd">No, Customer Managed </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Auditing</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Customization needed</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Layer 7 Load Balancer</td><td class="confluenceTd">Yes</td><td class="confluenceTd">No</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Logging</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Customization Needed</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Sticky Session</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Not Supported</td><td class="confluenceTd">Not needed for Micro services</td></tr><tr><td class="confluenceTd">TLS Termination</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Not Supported</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">WAF</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Not Supported</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Request Tracing</td><td class="confluenceTd">Supported</td><td class="confluenceTd">Supported</td><td class="confluenceTd"> </td></tr></tbody></table></div><p>Based on the above key criteria that we are looking for cloud managed, highly scalable solution, AWS ALB with AWS API Gateway, CloudWatch can be used.</p><h2 id="EdgeServiceGatewayComparisonforCT-Applications-Pleasereferbelowfordetailedexplanationabouteachproduct:">Please refer below for detailed explanation about each product:</h2><h2 id="EdgeServiceGatewayComparisonforCT-Applications-AmazonAPIGateway,AmazonALB">Amazon API Gateway, Amazon ALB</h2><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Introduction.1">Introduction</h3><p><span style="color: rgb(68,68,68);">Amazon API Gateway is an AWS service that enables developers to create, publish, maintain, monitor, and secure APIs at any scale. </span></p><ul><li><span style="color: rgb(68,68,68);">S3</span></li><li><span style="color: rgb(68,68,68);">EC2</span></li><li><span style="color: rgb(68,68,68);">Lambdas</span></li><li><span style="color: rgb(68,68,68);">Containers</span></li></ul><p><strong>Pros</strong></p><ul><li>Proven Tools</li><li>Secure</li><li>Single Vendor and great support</li><li>Easy Maintanence</li><li>ALB works very well with AWS Route 53</li><li>Excellent Security</li><li>Ideal for running many services from - S3, EC2, BeanStalk, Serverless(Lambda) &amp; ECS</li></ul><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Cons">Cons</h3><ul><li>Throttle limits of 10,000 requests per second.</li><li>Only 50 RestApis per region are supported. We could check with AWS to see the possibility to increase this number.</li><li>There are limits per regions and per account on the API Gateway and ALB services.<br/><br/></li></ul><p><strong>References:</strong></p><ul><li>AWS ALB : <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html" class="external-link" rel="nofollow">https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html</a></li><li>AWS API Gateway : <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html" class="external-link" rel="nofollow">https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html</a></li><li>API Gateway Limits : <a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html" class="external-link" rel="nofollow">https://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html</a></li><li>AWS ALB Limits: <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-limits.html" class="external-link" rel="nofollow">https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-limits.html</a></li></ul><h2 id="EdgeServiceGatewayComparisonforCT-Applications-Zuul/Eureka">Zuul /Eureka</h2><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Introduction.2">Introduction</h3><p><span style="color: rgb(36,41,46);"><strong>Eureka</strong> is a REST (Representational State Transfer) based service cloud for locating services for the purpose of load balancing and failover of middle-tier servers. </span></p><p><u><span style="color: rgb(36,41,46);">Please note that Eureka is primarily designed for Spring MiroServices running in AWS (<strong>IaaS</strong>).  </span></u><span style="color: rgb(36,41,46);"><strong>PCF</strong> and <strong>Redhat Openshift </strong> do not need Eureka as they both take advantage of Google Kubernete's excellent pod based Service Abstractions and may load balancing!  </span></p><p><strong><u><span style="color: rgb(36,41,46);">This is actually a great advantage choosing Zuul as an Edge Server now! This will be covered more in the next section.</span></u></strong></p><p><span style="color: rgb(36,41,46);">Eureka also comes with a Java-based client component,the </span><span style="color: rgb(36,41,46);">Eureka Client (Ribbon)</span><span style="color: rgb(36,41,46);">, which makes interactions with the service much easier. The client also has a built-in load balancer that does basic round-robin load balancing. </span></p><p><strong>Zuul</strong> is Netflix’s Java-based API gateway. Netflix has used Zuul for all of its externally facing APIs for the past several years. Its also used across many industries like Kraft food, Footlocker, Northern Trust Bank, <u>So it’s battle-tested more than any other tool for Micrsoservices</u>.</p><p>Internally, Zuul processes a set of filters for every request. These are determined at runtime and pass information via a “Request Context.” These filters generally fall into one of four types:</p><ol><li>PRE – Invoked before traffic is sent to upstreams, the PRE filter is typically used to determine upstreams and/or to inject metadata.</li><li>ROUTE – Invoked after an upstream has been chosen, the ROUTE filter typically handles the actual proxy operation.</li><li>POST – Invoked after an upstream has begun to return a response, the POST filter typically does things like mangles response headers or audits.</li><li>ERROR – Invoked when a fatal error occurs in the processing of the filter chain, the ERROR filter is typically used to present the end user with a “pretty” error message or UI.</li></ol><p> </p><div><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Pros">Pros</h3></div><div><ul><li>Invented by Netflix and wrapped by Spring Cloud Framework.</li><li>Centralized Microservice oriented logic - Eazy for cross cutting concerns like logging, filtering, <span style="color: rgb(93,93,93);">authn or authz</span></li><li><span style="color: rgb(93,93,93);">TraceID injections at a single point - One of the most relevent feature in Microservices -<strong> Please refer to Spring Cloud Sleuth</strong></span></li><li><span style="color: rgb(93,93,93);">Zuul integates very well with Eureka and Kubenetes (PCF and Openshift).</span></li><li><span style="color: rgb(93,93,93);">Service encapsulation  (You don't want to expose all the micro-service end points to the outside works)</span></li><li><span style="color: rgb(93,93,93);">Service Aggregation (A single call to Zuul can be in turn be a composite of multiple calls to encapsulated services0</span></li><li><span style="color: rgb(93,93,93);">Offers server side Microservices loadbalancing in tandem with Eureka in AWS and in the future with Kuberenetes (PCF or Openshift)</span></li><li><span style="color: rgb(93,93,93);">Works well with Client side Load balancing with Spring/NetFlix Ribbon. (Ribbon is a client side load balancer and offers a HTML Template. Ribbon also works with Spring/Netfix Feign.</span></li><li><span style="color: rgb(93,93,93);">We are a spring Micro-service shop - Zuul integrates seamlessly with other Netfilx/Spring Cloud Technology</span></li><li><span style="color: rgb(93,93,93);">Excellent support by Pivotal (Not PCF but the company that owns Spring). </span></li><li><span style="color: rgb(93,93,93);">Easy Spring based configuration. The configuration is abstract URL based.</span></li><li><span style="color: rgb(93,93,93);">Dynamic configuration based on Groovy scripts</span></li></ul><div><span style="color: rgb(93,93,93);"><br/></span></div><div><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Cons.1">Cons</h3><ul><li>Adds an extra-layer(hop) but so is any other API gateway</li><li>Needs extra Eureka configuration for AWS region but is seamless. After all Eureka was designed especially for AWS before ALB is available.</li><li>Even though Zuul/Eureka are totally different from AWS API/ELB/S3 some features are repetitive</li><li>Customer Managing of these Edge services, it will be a challenge to scale up beyond certain level and for HA.</li></ul><h2 id="EdgeServiceGatewayComparisonforCT-Applications-ConcernsandAlleviation">Concerns and Alleviation</h2><h3 id="EdgeServiceGatewayComparisonforCT-Applications-Introduction.3">Introduction</h3><p>There are few concerns raised on Zuul/Eureka. This section will address them</p><ul><li><strong>No Support</strong> - The commercial company Pivotal offers support for all Spring OSS (Open Source Software). But then Zuul has been around and been stable for a long time</li><li><strong>Open Source Software</strong>- This is a concern but then the entire Spring Stack the teams are OSS. So are tools like Apache commons and Java it self. But these tools are backed up by solid companies. This concern is mute!</li><li><strong>Extra Layer of Configuration</strong> - Its not as complicated and support available. The websites from Spring, Netflix and AWS have so much documentation.</li></ul><h2 id="EdgeServiceGatewayComparisonforCT-Applications-Conclusion">Conclusion</h2><p>Its obvious AWS API Gateway and AWS Application Load Balance are best choice for next generation applications with cloud native approach that frees operations from maintenance overhead and development team from handling cross cutting concerns in the application to just focus on business logic developement.</p><p> </p></div></div>
                    </div>

                    
                                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="comments" class="pageSectionTitle">Comments:</h2>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-106347141"></a>
                                    <font class="smallfont"><p><a class="confluence-userlink user-mention" data-username="435323" href="https://confluence.sdlc.toyota.com/display/~435323" data-linked-resource-id="106339662" data-linked-resource-version="1" data-linked-resource-type="userinfo" data-base-url="https://confluence.sdlc.toyota.com">Matt G Madhavan (TMNA)</a> - Good start, Can we have Linkered in the mix for another tool to compare - Also a table of core features as to how the products measure against ?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/contenttypes/comment_16.png" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by 418023 at May 01, 2018 09:45
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-106347145"></a>
                                    <font class="smallfont"><p>Lakshmi,</p><p>Will do so after lunch. I am meeting with Shyam for his input with regards to this page.</p><p> </p><p>Matt</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/contenttypes/comment_16.png" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by 435323 at May 01, 2018 09:47
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    </div>
                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 07, 2018 23:41</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
