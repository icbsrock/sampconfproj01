<!DOCTYPE html>
<html>
    <head>
        <title>CTP : Component / Dependency Analysis - Connected Vehicle Services</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">CTP</a></span>
                            </li>
                                                    <li>
                                <span><a href="Connected-Technology-Platform---HOME_106337033.html">Connected Technology Platform - HOME</a></span>
                            </li>
                                                    <li>
                                <span><a href="Knowledge-Base_106337044.html">Knowledge Base</a></span>
                            </li>
                                                    <li>
                                <span><a href="Design_106337061.html">Design</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            CTP : Component / Dependency Analysis - Connected Vehicle Services
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Lakshminarayanan Mukundagiri (TMNA)</span>, last modified by <span class='editor'> Navin Chaudhary (TMNA)</span> on Apr 23, 2018
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong><br/></strong></p><h1 id="Component/DependencyAnalysis-ConnectedVehicleServices-ProvisioningApplication">Provisioning Application</h1><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Description">Description</h2><p>Provisioning application offers various feature for the customers to opt in/sign up for various services like </p><ul><li>Remote Service</li><li>Remote Diagnostic</li><li>Head Units </li></ul><p>with a total of 8 provisioning options.</p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-High-LevelArchitecture">High-Level Architecture</h2><p>The application consists of three layers:</p><ul><li>UI</li><li>Middle Tier</li><li>DB</li></ul><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-UILayer">UI Layer</h3><p>The UI layer is built using Angular version 5.x and the layer communicates with the middle tier via REST over HTTPS.</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-MiddleTier">Middle Tier</h3><p>The middle-tier essentially consists of a single micro service (Spring Micro Service) called the Orchestrator with three  CRUD operations:</p><ul><li>PUT</li><li>POST</li><li>DELETE (*Currently not performed at this Point* - No API in place for this action)</li><li>GET</li></ul><p>with varying payloads for different opt-ins.</p><p><br/>TSC Japan - Communication done via REST call via MPLS protocol based Tunnel. This service offers 5 of the eight provisioning servicesThe Orchestrator  in turn communicates with 2 external micro services</p><ul><li>TC  -  Communication done via REST call. This service offers 3 of the eight provisioning services</li></ul><p>The Orchestrator  also uses a Cosmo Database via a MongoDB wrapper</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-DBLayer">DB Layer</h3><p>The DB layer is a Cosmos DB wrapped in a MongoDB layer</p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Dependencis">Dependencis</h2><ul><li>TSC Japan</li><li>TC</li></ul><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-TechnologyStack">Technology Stack</h2><p>The technology stack consists of:</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-UILayer.1">UI Layer</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology </div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Part of Build Pipeline Strategy </div></th><th class="confluenceTh"><div class="tablesorter-header-inner"> </div></th></tr></thead><tbody><tr><td class="confluenceTd"> Angular</td><td class="confluenceTd"> No</td><td class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Angular Material</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd"> Angular CLI</td><td class="confluenceTd"> Yes</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd"> NodeJS</td><td class="confluenceTd"> NodeJS</td><td class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Docker</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">DNS</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Certificates</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-MiddleTier.1">Middle Tier</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology </div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Part of Build Pipeline Strategy </div></th></tr></thead><tbody><tr><td class="confluenceTd"> JDK 8</td><td class="confluenceTd"> Yes</td></tr><tr><td class="confluenceTd"> Maven</td><td class="confluenceTd"> Yes</td></tr><tr><td class="confluenceTd"> Arifactory</td><td class="confluenceTd"> Yes</td></tr><tr><td colspan="1" class="confluenceTd">Spring Boot</td><td colspan="1" class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">LogUtility</td><td colspan="1" class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">BitBucket</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">Artifactory</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">Docker</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">DNS</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Certificates</td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-DBLayer.1">DB Layer</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology</div></th><th class="confluenceTh"><div class="tablesorter-header-inner"><span>Part of Build Pipeline Strategy</span></div></th></tr></thead><tbody><tr><td class="confluenceTd">MongoDB Wrapper</td><td class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">CosmosDB</td><td colspan="1" class="confluenceTd">NO</td></tr></tbody></table></div><p> </p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Impediments"><span style="color: rgb(255,0,0);">Impediments</span></h2><p><span style="color: rgb(255,0,0);">At the moment the testing of the external service to TSC Japan is extremely painful. It requires MPLS based VPN tunnel.</span><u><strong> <span style="color: rgb(255,0,0);">The team would like CT team to offer a work around/alternate solution.</span></strong></u></p><p> </p><h1 id="Component/DependencyAnalysis-ConnectedVehicleServices-CVSApplication">CVS Application</h1><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Description.1">Description</h2><p>CVS application role is to enrich the basic vehicle information data that it receives from the TSC.</p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Components">Components</h2><p>CVS doesn’t have a frontend or UI and has four different components:</p><ul><li>ADF </li><li>FDF</li><li><p style="text-align: left;">Vehicle Store</p></li><li><p style="text-align: left;">Web API’s – Final enriched data is exposed via restful API’s to other apps.<br/>                                                                                                                                                                                                                                                                                        </p></li></ul><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Dependencies">Dependencies</h2><p>There are some integration dependencies for CVS as per current architecture, but they are going to go away with the new architecture that is proposed and will be implemented in next couple of months.</p><p>Dependencies based on Current Architecture:</p><ul><li>FTH server for FDF and FDFAck file exchanges</li><li>Azure service bus for message exchange</li><li>Azure blob storage for storing FDF and FDFAck files</li></ul><p> </p><p><span>High-Level Architecture</span></p><p>The application consists of three layers:</p><ul><li>UI</li><li>Middle Tier</li><li>DB</li></ul><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-UILayer.2">UI Layer</h3><p>The UI layer is built using Angular version 5.x and the layer communicates with the middle tier via REST over HTTPS.</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-MiddleTier.2">Middle Tier</h3><p>The middle-tier essentially consists of a single micro service (Spring Micro Service) called the Orchestrator with three  CRUD operations:</p><ul><li>PUT</li><li>POST</li><li>DELETE</li></ul><p>with varying payloads.</p><p> </p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-DBLayer.2">DB Layer</h3><p>The DB layer is a Cosmos DB wrapped in a MongoDB layer.</p><p><span>Dependencies</span></p><p>There are some integration dependencies for CVS as per current architecture, but they are going to go away with the new architecture that is proposed and will be implemented in next couple of months.</p><p>Dependencies based on Current Architecture:</p><ul><li>FTH server for FDF and FDFAck file exchanges</li><li>Azure service bus for message exchange</li><li>Azure blob storage for storing FDF and FDFAck files</li></ul><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-TechnologyStack.1">Technology Stack</h2><p>The technology stack consists of:</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-UILayer.3">UI Layer</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology </div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Part of Build Pipeline Strategy </div></th><th class="confluenceTh"><div class="tablesorter-header-inner"> </div></th></tr></thead><tbody><tr><td class="confluenceTd"> Angular</td><td class="confluenceTd"> No</td><td class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Angular Material</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd"> Angular CLI</td><td class="confluenceTd"> Yes</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd"> NodeJS</td><td class="confluenceTd"> NodeJS</td><td class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Docker</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">DNS</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Certificates</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-MiddleTier.3">Middle Tier</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology </div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Part of Build Pipeline Strategy </div></th></tr></thead><tbody><tr><td class="confluenceTd"> JDK 8</td><td class="confluenceTd"> Yes</td></tr><tr><td class="confluenceTd"> Maven</td><td class="confluenceTd"> Yes</td></tr><tr><td class="confluenceTd"> Artifactory</td><td class="confluenceTd"> Yes</td></tr><tr><td colspan="1" class="confluenceTd">Spring Boot</td><td colspan="1" class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">LogUtility</td><td colspan="1" class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">BitBucket</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">Artifactory</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">Docker</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">FTH server </td><td colspan="1" class="confluenceTd">Yes</td></tr><tr><td colspan="1" class="confluenceTd">Azure Service Bus</td><td colspan="1" class="confluenceTd">yes</td></tr><tr><td colspan="1" class="confluenceTd">AzureBlob</td><td colspan="1" class="confluenceTd">yes</td></tr><tr><td colspan="1" class="confluenceTd">DNS</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">Certificates</td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-DBLayer.3">DB Layer</h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Technology</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Part of Build Pipeline Strategy</div></th></tr></thead><tbody><tr><td class="confluenceTd">MongoDB Wrapper</td><td class="confluenceTd">No</td></tr><tr><td colspan="1" class="confluenceTd">CosmosDB</td><td colspan="1" class="confluenceTd">NO</td></tr></tbody></table></div><p> </p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-Impediments.1"><span style="color: rgb(255,0,0);">Impediments</span></h2><p><span style="color: rgb(255,0,0);">N/A</span></p><p> </p><h2 id="Component/DependencyAnalysis-ConnectedVehicleServices-FutureChanges"><span style="color: rgb(255,153,0);">Future Changes</span></h2><p><span style="color: rgb(255,153,0);">The team currently uses Azure Service bus for Integration. The team would like CT offer a better option for Integration like <strong>Apache Came</strong>l. Shyam Besani and  Matt Madhavan  along with the rest of the ream will evaluate and offer appropriate solution.</span></p><p> </p><h1 id="Component/DependencyAnalysis-ConnectedVehicleServices-Crosscuttingrequirementsandchanges">Crosscutting requirements and changes</h1><p>The future applications and the current applications need assistance from the Team CT in as follows:</p><h3 id="Component/DependencyAnalysis-ConnectedVehicleServices-MicroServicePatterns">Micro Service Patterns</h3><h4 id="Component/DependencyAnalysis-ConnectedVehicleServices-APIGateway">API Gateway </h4><p> Currently the teams do not implement API gateways. This design pattern is very essential in the following areas:</p><ul><li>Service Abstration</li><li>Load balancing </li><li>Security and Filtering, </li></ul><p>The Shyam and Matt of the Team CT is working on creating Reference (Micro) Architectures as POC. The application teams will be given demos. Currently the team is leaning towards <strong>ZUUL </strong>as the API Gateway implementation.</p><p>Zuul, works integrates very well and seamlessly  with OpenShift/Kubernets and eliminates the need for the need for <strong>Service Discovery/Service Regisrty </strong> with tools like Eureka/Apache Zookeeper/Cosul etc (See next sections)  as the Kuberntes' Service abstraction takes care of yes servie abstraction, loadbalancing and auto scaling etc.</p><p>The API Gateway for raw AWS/ECS works with <strong>Eureka </strong> to do the same abstractions. Shyam and Matt of Team TC will investigate and offer a solution as none of them have prior experience in doing so!</p><h4 id="Component/DependencyAnalysis-ConnectedVehicleServices-ServiceDIscovery/ServiceRegistry(DS/SR)">Service DIscovery/Service Registry (DS/SR)</h4><p>SD/SR is needed by API Gateway. CF and Kubernets Service abstractions eliminates the need for Service Discovey. AWS uses Eureka and DNS to offer the services. The Tema CT will offer appropriate solution</p><h4 id="Component/DependencyAnalysis-ConnectedVehicleServices-Security">Security</h4><p>Currently there is no appropriate security for the Spring Microservices. Spring Microservices use OAuh2 and token based sucurity. The Team CT will find a solution that involves integrating Spring Security with the in-house OAuth based security built by TS</p><h4 id="Component/DependencyAnalysis-ConnectedVehicleServices-Logging">Logging </h4><p>The Team CT will create an appropriate logging solution bases on ELK/EFK based stack or other options. Currently a Reference Architecture is being worked by Shyam and Matt.</p><h4 id="Component/DependencyAnalysis-ConnectedVehicleServices-DistributedTracingwithSpringSleuthandandZipkin">Distributed Tracing with Spring Sleuth and and Zipkin</h4><p>As the number of microservices grow it becomes extremely hard to trace the calls and timing matrices. A refernce Architecture based on Spring Sleuth and Zipkin is being worked on by team CT </p><p> </p><p><strong><u>Contributor</u> - Matt G Madhavan &amp; Navin Chaudhary</strong></p><p> </p><p> </p><p> </p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 07, 2018 23:41</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
